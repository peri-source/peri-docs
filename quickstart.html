<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PERI quickstart guide &mdash; PERI 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/mathconf.js"></script>
    <link rel="top" title="PERI 0.1.1 documentation" href="index.html" />
    <link rel="next" title="PERI Walkthrough" href="walkthrough.html" />
    <link rel="prev" title="Welcome to PERI’s documentation!" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="walkthrough.html" title="PERI Walkthrough"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PERI’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PERI 0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="peri-quickstart-guide">
<h1>PERI quickstart guide<a class="headerlink" href="#peri-quickstart-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Install 64-bit Python, in version 2.7</li>
<li>Install <code class="docutils literal"><span class="pre">numpy</span></code>, <code class="docutils literal"><span class="pre">scipy</span></code>, <code class="docutils literal"><span class="pre">matplotlib</span></code>, <code class="docutils literal"><span class="pre">pyfftw</span></code>, and <code class="docutils literal"><span class="pre">pillow</span></code>, all for 64 bit Python</li>
<li>Install PERI: <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">peri</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="peri-states">
<h2>PERI States<a class="headerlink" href="#peri-states" title="Permalink to this headline">¶</a></h2>
<p>The centerpiece of <code class="docutils literal"><span class="pre">peri</span></code> is an object known as a <code class="docutils literal"><span class="pre">State</span></code> or <code class="docutils literal"><span class="pre">ImageState</span></code>,
as described in detail in <a class="reference internal" href="architecture.html"><em>Architecture</em></a>. An <code class="docutils literal"><span class="pre">ImageState</span></code>
is a complete description of a <code class="docutils literal"><span class="pre">peri</span></code>&#8216;s fit of an image, containing the raw
data itself, the fitted particle and microscope parameters, the quality of the
fit (the fit error and fit residuals), and even the mathematical model used to
describe the image.</p>
<p>The featured images are stored as <code class="docutils literal"><span class="pre">ImageState</span></code> s, which can be saved and
loaded through <code class="docutils literal"><span class="pre">peri.states.save</span></code> and <code class="docutils literal"><span class="pre">peri.states.load</span></code> . Featuring an
image from start to finish involves creating a state and optimizing all its
parameters. To do this, keep reading....</p>
</div>
<div class="section" id="featuring-an-image-from-a-python-ide">
<h2>Featuring an Image, from a Python IDE<a class="headerlink" href="#featuring-an-image-from-a-python-ide" title="Permalink to this headline">¶</a></h2>
<p>Open your favorite version of a Python IDE or Jupyter notebook. Type</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">peri</span> <span class="kn">import</span> <span class="n">runner</span>
</pre></div>
</div>
<p>to import <code class="docutils literal"><span class="pre">peri</span></code>&#8216;s <code class="docutils literal"><span class="pre">runner</span></code> module, which contains most of the convenience
functions for analyzing images. The <code class="docutils literal"><span class="pre">runner</span></code> module contains several functions
which will let you completely feature an image from various starting points:</p>
<blockquote>
<div><ul class="simple">
<li>from scratch</li>
<li>from a guess of positions and radii</li>
<li>using the microscope parameters from another state</li>
<li>using the microscope parameters and positions from another state</li>
</ul>
</div></blockquote>
<p>All of these <code class="docutils literal"><span class="pre">runner</span></code> functions allow you to select the images and
previously-featured states interactively through dialog boxes, for convenience.
If this is not convenient you can instead pass the filenames for the states and images
directly to the runner functions, along with a whole lot more options. Read the
documentation if you want to know more!</p>
<div class="section" id="from-scratch">
<h3>...from scratch<a class="headerlink" href="#from-scratch" title="Permalink to this headline">¶</a></h3>
<p>To feature an image of dark spherical particles with a radius of roughly 5
pixels on a bright background, type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">runner</span><span class="o">.</span><span class="n">get_initial_featuring</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This will pull up a file dialog box asking you to select the image to feature.
Once you&#8217;ve done this, it will run on its own and save the state to the same
directory as the image.</p>
</div>
<div class="section" id="from-a-guess-of-positions-and-radii">
<h3>...from a guess of positions and radii<a class="headerlink" href="#from-a-guess-of-positions-and-radii" title="Permalink to this headline">¶</a></h3>
<p>Perhaps you&#8217;ve already spent a lot of time with another method and have a
pretty good guess for all the particle positions and radii. In that case, run</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">runner</span><span class="o">.</span><span class="n">feature_from_pos_rad</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">rad</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">pos</span></code> and <code class="docutils literal"><span class="pre">rad</span></code> are <code class="docutils literal"><span class="pre">numpy.ndarray</span></code> s of the particle positions and
radii. Once again, this will pull up a file dialog box asking you to select the
image to feature, and run on its own to produce and save a fully-optimized
state.</p>
</div>
<div class="section" id="using-the-microscope-parameters-from-another-state">
<h3>...using the microscope parameters from another state<a class="headerlink" href="#using-the-microscope-parameters-from-another-state" title="Permalink to this headline">¶</a></h3>
<p>You&#8217;ve already featured a few images from your dataset and have a good
<code class="docutils literal"><span class="pre">peri</span></code> state for your microscope. You don&#8217;t want to spend a ton of time
re-featuring the microscope parameters again; you just want the positions in
the next image. If the particles in the new image have a radius of roughly
5 pixels, run</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">runner</span><span class="o">.</span><span class="n">get_particles_featuring</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>You&#8217;ll select the image and previously-featured state through dialog boxes.</p>
</div>
<div class="section" id="using-the-microscope-parameters-and-positions-from-another-state">
<h3>...using the microscope parameters and positions from another state<a class="headerlink" href="#using-the-microscope-parameters-and-positions-from-another-state" title="Permalink to this headline">¶</a></h3>
<p>If the particles haven&#8217;t moved by a whole lot from one frame in your dataset
to the next, then you can use</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">runner</span><span class="o">.</span><span class="n">translate_featuring</span><span class="p">()</span>
</pre></div>
</div>
<p>which also allows for you to select the image through dialog boxes.</p>
</div>
</div>
<div class="section" id="getting-your-data">
<h2>Getting your Data<a class="headerlink" href="#getting-your-data" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Load a state</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">peri</span> <span class="kn">import</span> <span class="n">states</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">states</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;your-state-name.pkl&#39;</span><span class="p">)</span>  <span class="c1">#use your appropriate filename</span>
</pre></div>
</div>
<ul class="simple">
<li>Check the state.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">peri.viz.interaction</span> <span class="kn">import</span> <span class="n">OrthoManipulator</span>
<span class="n">OrthoManipulator</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>  <span class="c1">#pulls up an interactive window</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">peri</span></code> functions by fitting the image to a detailed model. If the model
doesn&#8217;t fit the image, then the extracted parameters like particle positions
and radii will be incorrect. The <code class="docutils literal"><span class="pre">OrthoManipulator</span></code> lets you check the fit.
Cycle through various views by hitting <code class="docutils literal"><span class="pre">Q</span></code>. If you can see shadows of
particles in the residuals view, or structure in the residuals in Fourier
space, then your fit is far from the minimum. You can improve the fit by
running</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">runner</span><span class="o">.</span><span class="n">finish_state</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="optimization.html"><em>Optimization</em></a> for additional details, tips, and tricks.</p>
<ul class="simple">
<li>Get the positions and radii:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">positions</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">obj_get_positions</span><span class="p">()</span>
<span class="n">radii</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">obj_get_radii</span><span class="p">()</span>
</pre></div>
</div>
<p>Missing things:
* tile
* slab, component collection
* starting with a small state</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">PERI quickstart guide</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#peri-states">PERI States</a></li>
<li><a class="reference internal" href="#featuring-an-image-from-a-python-ide">Featuring an Image, from a Python IDE</a><ul>
<li><a class="reference internal" href="#from-scratch">...from scratch</a></li>
<li><a class="reference internal" href="#from-a-guess-of-positions-and-radii">...from a guess of positions and radii</a></li>
<li><a class="reference internal" href="#using-the-microscope-parameters-from-another-state">...using the microscope parameters from another state</a></li>
<li><a class="reference internal" href="#using-the-microscope-parameters-and-positions-from-another-state">...using the microscope parameters and positions from another state</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getting-your-data">Getting your Data</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to PERI&#8217;s documentation!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="walkthrough.html"
                        title="next chapter">PERI Walkthrough</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="walkthrough.html" title="PERI Walkthrough"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to PERI’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">PERI 0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Matt Bierbaum, Brian Leahy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>